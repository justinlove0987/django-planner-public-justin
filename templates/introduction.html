{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="shortcut icon" type="image/png" href="img/icon.png" />

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600&display=swap" rel="stylesheet" />
    <link href="https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="{% static 'introduction.css' %}" />
    <title>Bankist | When Banking meets Minimalist</title>

    {% comment %}
    <script defer src="script.js"></script>
    {% endcomment %}
  </head>
  <body>
    <header class="header">
      <nav class="nav">
        <div class="nav__logo">
          <i class="bx bx-shape-triangle nav__logo-img"></i>
          <div class="nav__logo-text">Planner</div>
        </div>
        {% comment %} <img src="img/logo.png" alt="Bankist logo" class="nav__logo" id="logo" designer="Jonas" data-version-number="3.0" /> {% endcomment %}
        <ul class="nav__links">
          <li class="nav__item">
            <a class="nav__link" href="#section--1">特色</a>
          </li>
          <li class="nav__item">
            <a class="nav__link" href="#section--2">檢閱</a>
          </li>
          <li class="nav__item">
            <a class="nav__link" href="#section--3">用戶真心話</a>
          </li>
          <li class="nav__item">
            <a class="nav__link--btn" href="{% url 'home' %}">加入我們</a>
          </li>
        </ul>
      </nav>

      <div class="header__title">
        <!-- <h1 onclick="alert('HTML alert')"> -->
        <h1>
          用一個
          <!-- Green highlight effect -->
          <span class="highlight">簡單的</span> APP
          <br />
          成為
          <span class="highlight">夢幻的</span> 計畫專家
        </h1>
        <h4>長計畫，短安排</h4>
        <button class="btn--text btn--scroll-to">Learn more &DownArrow;</button>
        <img src="{% static 'img/hero3.png' %}" class="header__img" alt="Minimalist bank items" />
      </div>
    </header>

    <section class="section" id="section--1">
      <div class="section__title">
        <h2 class="section__description">特色</h2>
        <h3 class="section__header">你所需要的不多，一個Planner就夠！</h3>
      </div>

      <div class="features">
        <img src="{% static 'img/plan-lazy.png' %}" data-src="{% static 'img/plan.png' %}" alt="Computer" class="features__img lazy-img" />
        <div class="features__feature">
          <div class="features__icon">
            <i class="bx bx-desktop"></i>
          </div>
          <h5 class="features__header">簡簡單單建立計畫</h5>
          <p>輸入總共需完成量和每天預期做的進度量，自動為您將每天的進度量分配到接下來的每一天！</p>
        </div>

        <div class="features__feature">
          <div class="features__icon">
            <i class="bx bx-task"></i>
          </div>
          <h5 class="features__header">輕輕鬆鬆就排程</h5>
          <p>透過簡易拖拉進行排程。</p>
        </div>
        <img src="{% static 'img/schedule-lazy.png' %}" data-src="{% static 'img/schedule.png' %}" alt="Credit card" class="features__img lazy-img" />
        <!--
        <img src="{% static 'img/analytics-lazy.png' %}" data-src="{% static 'img/analytics.png' %}" alt="Plant" class="features__img lazy-img" />

        <div class="features__feature">
          <div class="features__icon">
            <i class="bx bx-task"></i>
          </div>
          <h5 class="features__header">輕輕鬆鬆就排程</h5>
          <p>透過簡易拖拉進行排程。</p>
        </div>
        -->
      </div>
    </section>

    <section class="section" id="section--2">
      <div class="section__title">
        <h2 class="section__description">檢閱</h2>
        <h3 class="section__header">快速檢閱計畫的每個環節！</h3>
      </div>

      <div class="operations">
        <div class="operations__tab-container">
          <button class="btn operations__tab operations__tab--1 operations__tab--active" data-tab="1"><span>01</span>檢閱每天計畫</button>
          <button class="btn operations__tab operations__tab--2" data-tab="2"><span>02</span>檢閱整體計畫</button>
          <button class="btn operations__tab operations__tab--3" data-tab="3"><span>03</span>檢閱計畫分析</button>
        </div>
        <div class="operations__content operations__content--1 operations__content--active">
          <div class="operations__icon operations__icon--1">
            <i class="bx bx-calendar"></i>
          </div>
          <h5 class="operations__header">在主畫面快速檢視每天計畫！</h5>
          <img src="{% static 'img/today_learning.png' %}" alt="" class="operations__img" />
        </div>

        <div class="operations__content operations__content--2">
          <div class="operations__icon operations__icon--2">
            <i class="bx bx-table"></i>
          </div>
          <h5 class="operations__header">綜觀計畫全體，清楚掌握目前進度。</h5>
          <img src="{% static 'img/total_learning.png' %}" alt="" class="operations__img" />
        </div>
        <div class="operations__content operations__content--3">
          <div class="operations__icon operations__icon--3">
            <i class="bx bx-bar-chart-alt-2"></i>
          </div>
          <h5 class="operations__header">透過查看每週執行量長條圖，掌握計畫狀況。</h5>
          <img src="{% static 'img/analytics.png' %}" alt="" class="operations__img" />
        </div>
      </div>
    </section>

    <section class="section" id="section--3">
      <div class="section__title section__title--testimonials">
        <h2 class="section__description">還不確定要使用嗎?</h2>
        <h3 class="section__header">超過您想像的用戶數正在使用Planner!</h3>
      </div>

      <div class="slider">
        <div class="slide">
          <div class="testimonial">
            <h5 class="testimonial__header">你一定得用Planner</h5>
            <blockquote class="testimonial__text">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Accusantium quas quisquam non? Quas voluptate nulla minima deleniti optio ullam nesciunt, numquam corporis et asperiores laboriosam sunt, praesentium suscipit blanditiis. Necessitatibus id alias reiciendis, perferendis facere pariatur dolore veniam autem esse non voluptatem saepe provident nihil molestiae.</blockquote>
            <address class="testimonial__author">
              <img src="{% static 'img/user-1.jpg' %}" alt="" class="testimonial__photo" />
              <h6 class="testimonial__name">Aarav Lynn</h6>
              <p class="testimonial__location">洛杉磯, 美國</p>
            </address>
          </div>
        </div>

        <div class="slide">
          <div class="testimonial">
            <h5 class="testimonial__header">我有一個好朋友叫Planner</h5>
            <blockquote class="testimonial__text">Quisquam itaque deserunt ullam, quia ea repellendus provident, ducimus neque ipsam modi voluptatibus doloremque, corrupti laborum. Incidunt numquam perferendis veritatis neque repellendus. Lorem, ipsum dolor sit amet consectetur adipisicing elit. Illo deserunt exercitationem deleniti.</blockquote>
            <address class="testimonial__author">
              <img src="{% static 'img/user-2.jpg' %}" alt="" class="testimonial__photo" />
              <h6 class="testimonial__name">Miyah Miles</h6>
              <p class="testimonial__location">倫敦, 英國</p>
            </address>
          </div>
        </div>

        <div class="slide">
          <div class="testimonial">
            <h5 class="testimonial__header">原來計畫可以這麼簡單</h5>
            <blockquote class="testimonial__text">Debitis, nihil sit minus suscipit magni aperiam vel tenetur incidunt commodi architecto numquam omnis nulla autem, necessitatibus blanditiis modi similique quidem. Odio aliquam culpa dicta beatae quod maiores ipsa minus consequatur error sunt, deleniti saepe aliquid quos inventore sequi. Necessitatibus id alias reiciendis, perferendis facere.</blockquote>
            <address class="testimonial__author">
              <img src="{% static 'img/user-3.jpg' %}" alt="" class="testimonial__photo" />
              <h6 class="testimonial__name">Francisco Gomes</h6>
              <p class="testimonial__location">里斯本, 葡萄牙</p>
            </address>
          </div>
        </div>

        <button class="slider__btn slider__btn--left">&larr;</button>
        <button class="slider__btn slider__btn--right">&rarr;</button>
        <div class="dots"></div>
      </div>
    </section>

    <section class="section section--sign-up">
      <div class="section__title">
        <h3 class="section__header">別再等待了！一起加入我們的行列吧！</h3>
      </div>
      {% comment %} <button class="btn btn--show-modal">馬上加入!</button> {% endcomment %}
      <a href="{% url 'home' %}" class="btn">馬上加入!</a>
    </section>

    <footer class="footer">
      <ul class="footer__nav">
        <li class="footer__item">
          <a class="footer__link" href="#">關於我們</a>
        </li>
        <li class="footer__item">
          <a class="footer__link" href="#">價格</a>
        </li>
        <li class="footer__item">
          <a class="footer__link" href="#">隱私權政策</a>
        </li>
        <li class="footer__item">
          <a class="footer__link" href="#">職缺</a>
        </li>
        <li class="footer__item">
          <a class="footer__link" href="#">部落格</a>
        </li>
        <li class="footer__item">
          <a class="footer__link" href="#">聯絡我們</a>
        </li>
      </ul>
      {% comment %} <img src="img/icon.png" alt="Logo" class="footer__logo" /> {% endcomment %}
      <p class="footer__copyright">
        &copy; Copyright by
        <a class="footer__link twitter-link" target="_blank" href="">Jonas Schmedtmann</a>.
      </p>
    </footer>

    <div class="modal hidden">
      <button class="btn--close-modal">&times;</button>
      <h2 class="modal__header">新增帳戶只需 <span class="highlight">1 分鐘 </span></h2>
      <form class="modal__form" method="POST" action="{% url 'home' %}">
        {% csrf_token %}
        <label>Email Address</label>
        <input type="email" />
        <label>Password</label>
        <input type="password" />
        <button class="btn" type="submit">開始計畫吧！ &rarr;</button>
      </form>
    </div>
    <div class="overlay hidden"></div>

    <!-- <script src="script.js"></script> -->
  </body>

  <script>
    "use strict";
    /*
    const modal = document.querySelector(".modal");
    const overlay = document.querySelector(".overlay");
    const btnCloseModal = document.querySelector(".btn--close-modal");
    const btnsOpenModal = document.querySelectorAll(".btn--show-modal");
    */
    const btnScrollTo = document.querySelector(".btn--scroll-to");
    const section1 = document.querySelector("#section--1");
    const nav = document.querySelector(".nav");
    const tabs = document.querySelectorAll(".operations__tab");
    const tabsContainer = document.querySelector(".operations__tab-container");
    const tabsContent = document.querySelectorAll(".operations__content");

    /*
    ///////////////////////////////////////
    // Modal window

    const openModal = function (e) {
      e.preventDefault();
      modal.classList.remove("hidden");
      overlay.classList.remove("hidden");
    };

    const closeModal = function () {
      modal.classList.add("hidden");
      overlay.classList.add("hidden");
    };

    btnsOpenModal.forEach((btn) => btn.addEventListener("click", openModal));

    btnCloseModal.addEventListener("click", closeModal);
    overlay.addEventListener("click", closeModal);

    document.addEventListener("keydown", function (e) {
      if (e.key === "Escape" && !modal.classList.contains("hidden")) {
        closeModal();
      }
    });
    */

    ///////////////////////////////////////
    // Button scrolling
    btnScrollTo.addEventListener("click", function (e) {
      const s1coords = section1.getBoundingClientRect();
      console.log(s1coords);

      console.log(e.target.getBoundingClientRect());

      console.log("Current scroll (X/Y)", window.pageXOffset, window.pageYOffset);

      console.log("height/width viewport", document.documentElement.clientHeight, document.documentElement.clientWidth);

      section1.scrollIntoView({ behavior: "smooth" });
    });

    document.querySelector(".nav__links").addEventListener("click", function (e) {
      // console.log(e);

      if (e.target.classList.contains("nav__link--btn") !== true) {
        e.preventDefault();
      }

      // Matching strategy
      if (e.target.classList.contains("nav__link")) {
        const id = e.target.getAttribute("href");
        document.querySelector(id).scrollIntoView({ behavior: "smooth" });
      }
    });

    ///////////////////////////////////////
    // Tabbed component

    tabsContainer.addEventListener("click", function (e) {
      const clicked = e.target.closest(".operations__tab");

      // Guard clause
      if (!clicked) return;

      // Remove active classes
      tabs.forEach((t) => t.classList.remove("operations__tab--active"));
      tabsContent.forEach((c) => c.classList.remove("operations__content--active"));

      // Activate tab
      clicked.classList.add("operations__tab--active");

      // Activate content area
      document.querySelector(`.operations__content--${clicked.dataset.tab}`).classList.add("operations__content--active");
    });

    ///////////////////////////////////////
    // Menu fade animation
    const handleHover = function (e) {
      if (e.target.classList.contains("nav__link")) {
        const link = e.target;
        const siblings = link.closest(".nav").querySelectorAll(".nav__link");
        const logo = link.closest(".nav").querySelector("img");

        siblings.forEach((el) => {
          if (el !== link) el.style.opacity = this;
        });
        logo.style.opacity = this;
      }
    };

    // Passing "argument" into handler
    nav.addEventListener("mouseover", handleHover.bind(0.5));
    nav.addEventListener("mouseout", handleHover.bind(1));

    ///////////////////////////////////////
    // Sticky navigation: Intersection Observer API

    const header = document.querySelector(".header");
    const navHeight = nav.getBoundingClientRect().height;

    const stickyNav = function (entries) {
      const [entry] = entries;
      // console.log(entry);

      if (!entry.isIntersecting) nav.classList.add("sticky");
      else nav.classList.remove("sticky");
    };

    const headerObserver = new IntersectionObserver(stickyNav, {
      root: null,
      threshold: 0,
      rootMargin: `-${navHeight}px`,
    });

    headerObserver.observe(header);

    ///////////////////////////////////////
    // Reveal sections
    const allSections = document.querySelectorAll(".section");

    const revealSection = function (entries, observer) {
      const [entry] = entries;

      if (!entry.isIntersecting) return;

      entry.target.classList.remove("section--hidden");
      observer.unobserve(entry.target);
    };

    const sectionObserver = new IntersectionObserver(revealSection, {
      root: null,
      threshold: 0.15,
    });

    allSections.forEach(function (section) {
      sectionObserver.observe(section);
      section.classList.add("section--hidden");
    });

    // Lazy loading images
    const imgTargets = document.querySelectorAll("img[data-src]");

    const loadImg = function (entries, observer) {
      const [entry] = entries;

      if (!entry.isIntersecting) return;

      // Replace src with data-src
      entry.target.src = entry.target.dataset.src;

      entry.target.addEventListener("load", function () {
        entry.target.classList.remove("lazy-img");
      });

      observer.unobserve(entry.target);
    };

    const imgObserver = new IntersectionObserver(loadImg, {
      root: null,
      threshold: 0,
      rootMargin: "200px",
    });

    imgTargets.forEach((img) => imgObserver.observe(img));

    ///////////////////////////////////////
    // Slider
    const slider = function () {
      const slides = document.querySelectorAll(".slide");
      const btnLeft = document.querySelector(".slider__btn--left");
      const btnRight = document.querySelector(".slider__btn--right");
      const dotContainer = document.querySelector(".dots");

      let curSlide = 0;
      const maxSlide = slides.length;

      // Functions
      const createDots = function () {
        slides.forEach(function (_, i) {
          dotContainer.insertAdjacentHTML("beforeend", `<button class="dots__dot" data-slide="${i}"></button>`);
        });
      };

      const activateDot = function (slide) {
        document.querySelectorAll(".dots__dot").forEach((dot) => dot.classList.remove("dots__dot--active"));

        document.querySelector(`.dots__dot[data-slide="${slide}"]`).classList.add("dots__dot--active");
      };

      const goToSlide = function (slide) {
        slides.forEach((s, i) => (s.style.transform = `translateX(${100 * (i - slide)}%)`));
      };

      // Next slide
      const nextSlide = function () {
        if (curSlide === maxSlide - 1) {
          curSlide = 0;
        } else {
          curSlide++;
        }

        goToSlide(curSlide);
        activateDot(curSlide);
      };

      const prevSlide = function () {
        if (curSlide === 0) {
          curSlide = maxSlide - 1;
        } else {
          curSlide--;
        }
        goToSlide(curSlide);
        activateDot(curSlide);
      };

      const init = function () {
        goToSlide(0);
        createDots();

        activateDot(0);
      };
      init();

      // Event handlers
      btnRight.addEventListener("click", nextSlide);
      btnLeft.addEventListener("click", prevSlide);

      document.addEventListener("keydown", function (e) {
        if (e.key === "ArrowLeft") prevSlide();
        e.key === "ArrowRight" && nextSlide();
      });

      dotContainer.addEventListener("click", function (e) {
        if (e.target.classList.contains("dots__dot")) {
          const { slide } = e.target.dataset;
          goToSlide(slide);
          activateDot(slide);
        }
      });
    };
    slider();
  </script>
</html>
